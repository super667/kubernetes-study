[toc]

# Jenkins

## jenkins是什么

Jenkins是一个用Java编写的开源自动化工具，带有为持续集成目的而构建的插件。Jenkins用于持续构建和测试您的软件项目，从而使开发人员更容易将更改集成到项目中，并使用户更容易获得全新的构建。它还允许您通过与大量测试和部署技术集成来持续交付软件。

## 定义Jenkins的过程

首先，开发人员将代码提交到源代码存储库。同时，Jenkins服务器会定期检查存储库是否有更改。

提交后不久，Jenkins服务器检测到源代码存储库中发生的更改。Jenkins将撤消这些更改，并将开始准备新版本。

如果构建失败，则将通知相关团队。

如果构建成功，则Jenkins将构建部署到测试服务器中。

在测试之后，Jenkins生成反馈，然后将有关构建和测试结果的信息通知开发人员。

它将继续检查源代码存储库中是否对源代码进行了更改，并且整个过程不断重复。

## Jenkins有什么好处？

在集成阶段，您可以缓存构建失败。

对于源代码中的每个更改，您都会生成一个自动生成报告通知。

为了通知开发人员构建报告的成功或失败，Jenkins与LDAP邮件服务器集成。

实现持续集成的敏捷开发和测试驱动的开发。

通过简单的步骤，您可以使Maven发布项目自动化。

在开发环境中比生产阶段更容易在早期阶段跟踪错误。

## 使用Jenkins的前提条件是什么？

可访问的源代码存储库，例如Git存储库。

一个有效的构建脚本（例如Maven脚本）签入到存储库中

## 在Jenkins中提及一些有用插件

```js
Maven 2 project
Git
Amazon EC2
HTML publisher
Copy artifact
Join
Green Balls
```

## 您如何安装Jenkins

```js
（1）安装Java版本8 – Jenkins是基于Java的应用程序，因此必须使用Java。
（2）安装Apache Tomcat版本9 – Tomcat对于部署Jenkins war文件至关重要。
（3）下载Jenkins war文件–必须安装Jenkins进行此战争。
（4）部署Jenkins war文件–您可以使用Tomcat部署Jenkins war文件来运行Jenkins。
（5）安装建议的插件–安装Jenkins建议的插件列表。
```

## 什么是maven，将Maven与Jenkins继承有什么好处？

Maven是一个构建管理工具。它使用简单的pom.xml来配置构建，测试和运行代码所需的所有依赖项。Maven管理测试项目的整个生命周期。与Jenkins集成后，maven Webdriver将构建项目并有效执行所有测试。

## Jenkins支持哪些SCM工具?

```js
AccuRev
CVS
Subversion
Git
Mercurial
Perforce
Clearcase
RTC
```

## 您将如何在Jenkins中定义Post?

Post是一个部分，其中包含在管道完成后可能要执行的几个其他步骤。条件块中所有步骤的执行取决于管道的完成状态。条件块包括以下条件- 成功，始终，失败，不稳定和中止的更改。

## 什么是Groovy？

Apache的Groovy是专为Java平台设计的语言。它是Jenkins的本地脚本语言。基于Groovy的插件通过出色的界面增强了Jenkins的功能，并构建了具有动态性和一致性的报告。

# 中级问题

## 您如何通过Jenkins克隆git存储库

如果要通过Jenkins克隆Git存储库，则必须输入Jenkins系统的电子邮件和用户名。切换到您的作业目录并为此执行“ git config”命令。

## 说明如何设置Jenkins工作

我要回答这个问题的方法是首先提到如何创建Jenkins工作。

转到Jenkins主页，选择“新建作业”，然后选择“构建自由样式的软件项目”。

现在您可以说出此自由作业的元素：

```js
源代码所在的可选SCM，例如CVS或Subversion。
可选触发器，用于控制Jenkins何时执行构建。
某种执行实际工作的构建脚本（ant，maven，shell脚本，批处理文件等）。
从构建中收集信息的可选步骤，例如，归档工件和/或记录javadoc和测试结果。
通知其他人员/系统构建结果的可选步骤，例如发送电子邮件，IM，更新问题跟踪器等。
```

## 如何在Jenkins中创建备份和复制文件？

这个问题的答案确实是直接的。

要创建备份，您需要做的就是定期备份Jenkins_HOME目录。这包含所有构建作业配置，从属节点配置以及构建历史记录。要创建您的Jenkins设置的备份，只需复制此目录。您还可以复制作业目录以克隆或复制作业或重命名目录。

## 您将如何保护Jenkins？

如果您除了提到Jenkins之外还有其他方法可以确保安全，请在下面提到：

```js
确保全局安全性已启用。
使用适当的插件检查Jenkins是否已与我公司的用户目录集成。
确保已启用矩阵/项目矩阵以微调访问。
使用自定义版本控制脚本在Jenkins中自动设置权限/特权的过程。
限制对Jenkins数据/文件夹的物理访问。
定期对其进行安全审核。
```

## 解释如何部署核心插件的自定义版本？

```js
停止Jenkins。

将自定义HPI复制到 $ Jenkins_Home / plugins。

删除以前扩展的插件目录。

制作一个名为 .hpi.pinned的空文件 。

启动Jenkins。
```

## 在Jenkins中可以通过什么方式安排构建？

```js
通过源代码管理提交
完成其他构建后
可以安排在指定时间运行（crons）
手动构建请求
```

## Jenkins中管道的用途是什么？

Jenkins中使用Pipeline插件来制作Jenkins Pipeline，这使我们能够以阶段或任务的形式在管道表单中依次执行任务。它为一系列相关任务建模。管道可以帮助团队审查，编辑和迭代任务。管道是耐用的，它可以选择停止并等待人工批准，也可以开始下一个任务。管道是可扩展的，可以并行执行工作。它支持复杂的CD要求。

## 解释术语Agent，Post-section，Jenkinsfile

Agent：指示Jenkins以特定方式和顺序执行管道的指令

Post-section: 如果我们必须在管道的末尾添加一些通知并执行其他任务，则Post-section肯定会在每个管道的执行结束时运行。

Jenkinsfile: 定义了管道的所有定义的文本文件称为Jenkinsfile。正在源代码控制存储库中检查它。

## 什么是kubernetes?您如何将Jenkins和Kubernetes集成？

Kubernetes是一个容器编排工具。使用Kubernetes，可以创建多个容器实例以实现更高的容错能力。您可以使用Kubernetes部署插件将其与Jenkins一起使用以进行连续部署。

## 您是否在Jenkins上运行自动化测试？怎么做？

是的，这很容易做到。自动化测试可以通过Selenium或maven之类的工具运行。开发人员可以安排测试运行。Jenkins显示测试结果并将报告发送给开发人员。

## 让我们说，您有一条管道。第一项工作成功，但是第二项失败。接下来您该怎么办？

您只需要通过执行“从阶段重新启动”就可以从发生故障的点重新启动管道。

## Jenkins HOME目录的用途是什么？

所有设置，日志和配置都存储在Jenkins_HOME目录中。

## 什么是备用插件？为什么使用它？

这是一个有用的插件，可备份将来要使用的所有关键设置和配置。如果发生故障，这样我们就不会丢失设置，这很有用。

## 什么是触发器？举例说明检测到新提交时如何轮询存储库。

触发器用于定义何时以及如何执行管道。

当Jenkins与SCM工具（例如Git）集成时，每次提交时都可以轮询存储库。

应该先安装并设置Git插件。

之后，您可以构建一个触发器，该触发器指定何时应开始新的构建。例如，您可以创建一个作业，该作业将轮询存储库并在提交更改时触发构建。

## 您如何在Jenkins中定义构建的参数？

构建可以采用多个输入参数来执行。例如，如果您有多个测试套件，但只想运行一个。您可以设置一个参数，以便能够决定应运行哪个参数。要在作业中包含参数，则在定义参数时需要指定相同的参数。该参数可以是任何东西，例如字符串，文件或自定义。

## 配置Jenkins节点Agent以与Jenkins master通信的方式有哪些？

有两种方法可以启动节点代理–

浏览器–如果从浏览器启动Jenkins节点代理，则将下载JNLP（Java Web Start）文件。该文件在客户端计算机上启动新进程以运行作业。

命令行–要使用命令行启动节点代理，客户端需要可执行的agent.jar文件。运行此文件时，它仅在客户端上启动一个进程以与Jenkins主服务器通信以运行构建作业。

## Jenkins如何验证用户身份？

 有3种方法

默认方式是将用户数据和凭据存储在内部数据库中。

将Jenkins配置为使用由部署它的应用程序服务器定义的身份验证机制。

配置Jenkins以针对LDAP服务器进行身份验证。

## Jenkins的管道类型是什么？

CI CD管道（持续集成，持续交付）

脚本管道

声明式管道

什么是DevOps，Jenkins处于哪个阶段？

DevOps是一种软件开发实践，它将软件开发（Dev）与IT运营（Ops）融合在一起，通过不断交付构建，修复，更新等功能，使整个开发生命周期变得更简单，更短。Jenkins扮演了至关重要的角色，因为它通过自动化构建，测试和部署过程来帮助实现这种集成。

## 命名您在Shell脚本或批处理文件中使用过的Jenkins环境变量。

命名您在Shell脚本或批处理文件中使用过的Jenkins环境变量。

```js
$JOB_NAME
$NODE_NAME
$WORKSPACE
$BUILD_URL
$JOB_URL
```

请注意，随着新Jenkins插件的配置，更多的环境变量变得可用。例如，配置Jenkins Git插件后，新的Jenkins Git环境变量（例如$ GIT_COMMIT和$ GIT_URL）就可以在脚本中使用。

## 在Jenkins中，什么是持续集成？

在软件开发中，多个开发人员或团队在同一个Web应用程序的不同部分上工作。因此，在这种情况下，您必须通过集成所有模块来执行集成测试。为了做到这一点，每天都要对每段代码进行自动化处理，以便对所有代码进行测试。此过程称为连续集成。

## 您如何使用Jenkins实现持续集成？

所有开发人员都将其源代码更改提交到共享的Git存储库。

Jenkins服务器按指定的时间间隔检查共享的Git存储库，然后将检测到的更改纳入构建。

构建结果和测试结果共享给各个开发人员

生成的应用程序显示在Selenium等测试服务器上，并运行自动化测试。

干净且经过测试的内部版本已部署到生产服务器。

## 什么是DSL Jenkins

## 如何在Jenkins中创建多分支管道？

多分支管道项目类型使您可以为同一项目的不同分支实现不同的Jenkinsfile。在Multibranch Pipeline项目中，Jenkins自动发现，管理和执行在源代码管理中包含Jenkins的分支管道

## Jenkins的工作或项目类型是什么？

> Freestyle project
>
> Maven project
>
> Pipeline
>
> Multibranch pipeline
>
> External Job
>
> multi-configuration project
>
> Github organization

## Jenkins的blue ocean是什么？

这个项目的最初目的是重新思考Jenkins的用户体验，通过对开发团队重要的信息来建模和展示软件交付过程。只需尽可能少的点击即可完成次操作，同时仍然忠于Jenkins的核心可扩展性。虽然此项目出图开发的Alpha阶段，但目的是让Jenkins用户可以通过插件与Jenkins Classic UI 并排安装Blue Ocean

## jenkins都用了哪些插件

+ ssh remote hosts可以在远程服务器上执行脚本
+ role strategy plugin 用来精细化管理权限

# 高级问

## 什么是连续测试

连续测试是您在软件交付管道中执行自动化测试的过程。这样做是为了使您尽早获得有关与软件相关的业务风险的反馈。

# 敏捷开发

## 概念

简单的说，敏捷开发是一种以人为核心，迭代、寻序渐进的开发方法。在敏捷开发中，软件项目的构建被切分成多个子项目，各个子项目的成果都是经过测试，具备集成和可运行的特征。

换言之，就是把一个大项目分为多个相互联系，但也可以独立运行的小项目，并分别完成，在此过程中软件一直处于可使用状态，

敏捷最大的特色就是迭代式开发

## 优势

1. 敏捷开发属于增量式开发，对于需求范围不明确，需求变更较多的项目而言，可以很大程度上响应及拥抱变化。
2. 对于互联网产品而言，市场风向转变很快，需要一种及时快速的交付方式，而敏捷开发则能更好地适用于此。
3. 敏捷开发可最大程度上体现80/20法则的价值 ，通过增量迭代，每次都能优先交付能产生80%价值效益的20%功能。能最大化单位成本收益。

## 误区

应该看做是轻量级高效，而不是快速，越快越好

## 特点

+ 个体和交互胜过过程和工具
+ 可以工作的软件胜过面面俱到的文档
+ 客户合作胜过合同谈判
+ 响应变化胜过遵循计划

## 核心原则

+ 主张简单
+ 拥抱变化
+ 第二个目标是可持续性
+ 递增的变化
+ 另投资最大化
+ 有目的的建模
+ 多种模型
+ 高质量的工作
+ 快速反馈
+ 软件是你的主要目标
+ 轻装前进

# DevOps

https://www.zhihu.com/question/58702398

# 实践

## jenkins api

```bash
curl -X POST http://wangxianchao:11287cae6180ffbadcab625e43f68bd426@10.4.7.200:9091/createItem?name=prometheus-started-copy --header "Content-Type:text/xml" --data-binary @config.xml
```

+ wangxianchao： 用户名
+ 11287cae6180ffbadcab625e43f68bd426： 用户API token
+ http://10.4.7.200:9091/createItem: jenkins地址
+ prometheus-started-copy：新建Job名称